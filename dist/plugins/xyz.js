var r=function(r){return"string"==typeof r?r.length>0:"number"==typeof r},n=function(r,n,t){return void 0===n&&(n=0),void 0===t&&(t=Math.pow(10,n)),Math.round(t*r)/t+0},t=function(r,n,t){return void 0===n&&(n=0),void 0===t&&(t=1),r>t?t:r>n?r:n},u=function(r){var n=r/255;return n<.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)},o=function(r){return 255*(r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r)},a=96.422,e=100,y=82.521,i=function(r){return{x:t(r.x,0,a),y:t(r.y,0,e),z:t(r.z,0,y),a:t(r.a)}},x=function(n){var t=n.x,u=n.y,o=n.z,a=n.a,e=void 0===a?1:a;if(!r(t)||!r(u)||!r(o))return null;var y=i({x:Number(t),y:Number(u),z:Number(o),a:Number(e)});return z(y)},z=function(r){var n,u,a={x:.9555766*(n=r).x+-.0230393*n.y+.0631636*n.z,y:-.0282895*n.x+1.0099416*n.y+.0210077*n.z,z:.0122982*n.x+-.020483*n.y+1.3299098*n.z};return u={r:o(.032404542*a.x-.015371385*a.y-.004985314*a.z),g:o(-.00969266*a.x+.018760108*a.y+41556e-8*a.z),b:o(556434e-9*a.x-.002040259*a.y+.010572252*a.z),a:r.a},{r:t(u.r,0,255),g:t(u.g,0,255),b:t(u.b,0,255),a:t(u.a)}};module.exports=function(r,t){r.prototype.toXyz=function(r){return void 0===r&&(r=2),function(r,t){return void 0===t&&(t=2),{x:n(r.x,t),y:n(r.y,t),z:n(r.z,t),a:n(r.a,3>t?3:t)}}((o=u((t=this.rgba).r),a=u(t.g),e=u(t.b),i({x:1.0478112*(y={x:100*(.4124564*o+.3575761*a+.1804375*e),y:100*(.2126729*o+.7151522*a+.072175*e),z:100*(.0193339*o+.119192*a+.9503041*e),a:t.a}).x+.0228866*y.y+-.050127*y.z,y:.0295424*y.x+.9904844*y.y+-.0170491*y.z,z:-.0092345*y.x+.0150436*y.y+.7521316*y.z,a:y.a})),r);var t,o,a,e,y},t.object.push([x,"xyz"])};
